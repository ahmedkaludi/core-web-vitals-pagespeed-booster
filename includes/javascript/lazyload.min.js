var run=!1;const customDelayEvent=new CustomEvent("cwvdelayevent");class cwvLazyLoadScripts{constructor(e){this.triggerEvents=e,this.eventOptions={passive:!0},this.userEventListener=this.triggerListener.bind(this),this.delayedScripts={normal:[],async:[],defer:[]},this.allJQueries=[],this.firstrun=!1}_addUserInteractionListener(e){this.triggerEvents.forEach(t=>window.addEventListener(t,e.userEventListener,e.eventOptions))}_removeUserInteractionListener(e){this.triggerEvents.forEach(t=>window.removeEventListener(t,e.userEventListener,e.eventOptions))}triggerListener(){this.firstrun=!0,this._removeUserInteractionListener(this),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this._loadEverythingNow.bind(this)):this._loadEverythingNow()}async _loadEverythingNow(){this.loadAllCss(),this._delayEventListeners(),this._delayJQueryReady(this),this._handleDocumentWrite(),this._registerAllDelayedScripts(),this._preloadAllScripts(),this.loadAllJs(),await this._triggerDOMContentLoaded(),await this._triggerWindowLoad(),window.dispatchEvent(new Event("cwv-allScriptsLoaded"))}_registerAllDelayedScripts(){document.querySelectorAll("script[type=cwvlazyloadscript]").forEach(e=>{e.hasAttribute("src")?e.hasAttribute("async")&&!1!==e.async?this.delayedScripts.async.push(e):e.hasAttribute("defer")&&!1!==e.defer||"module"===e.getAttribute("data-cwv-type")?this.delayedScripts.defer.push(e):this.delayedScripts.normal.push(e):this.delayedScripts.normal.push(e)})}_preloadAllScripts(){var e=document.createDocumentFragment();[...this.delayedScripts.normal,...this.delayedScripts.defer,...this.delayedScripts.async].forEach(t=>{let r=this.removeVersionFromLink(t.getAttribute("src"));if(r){let n=document.createElement("link");n.href=r,n.rel="preload",n.as="script",e.appendChild(n)}}),document.head.appendChild(e)}_delayEventListeners(){let e={};function t(t,r){!function(t){function r(r){return e[t].eventsToRewrite.indexOf(r)>=0?"cwv-"+r:r}e[t]||(e[t]={originalFunctions:{add:t.addEventListener,remove:t.removeEventListener},eventsToRewrite:[]},t.addEventListener=function(){arguments[0]=r(arguments[0]),e[t].originalFunctions.add.apply(t,arguments)},t.removeEventListener=function(){arguments[0]=r(arguments[0]),e[t].originalFunctions.remove.apply(t,arguments)})}(t),e[t].eventsToRewrite.push(r)}function r(e,t){let r=e[t];Object.defineProperty(e,t,{get:()=>r||function(){},set(n){e["cwv"+t]=r=n}})}t(document,"DOMContentLoaded"),t(window,"DOMContentLoaded"),t(window,"load"),t(window,"pageshow"),t(document,"readystatechange"),r(document,"onreadystatechange"),r(window,"onload"),r(window,"onpageshow")}_delayJQueryReady(e){let t=window.jQuery;Object.defineProperty(window,"jQuery",{get:()=>t,set(r){if(r&&r.fn&&!e.allJQueries.includes(r)){r.fn.ready=r.fn.init.prototype.ready=function(t){e.domReadyFired?t.bind(document)(r):document.addEventListener("cwv-DOMContentLoaded",()=>t.bind(document)(r))};let n=r.fn.on;r.fn.on=r.fn.init.prototype.on=function(){if(this[0]===window){function e(e){return e.split(" ").map(e=>"load"===e||0===e.indexOf("load.")?"cwv-jquery-load":e).join(" ")}"string"==typeof arguments[0]||arguments[0]instanceof String?arguments[0]=e(arguments[0]):"object"==typeof arguments[0]&&Object.keys(arguments[0]).forEach(t=>{delete Object.assign(arguments[0],{[e(t)]:arguments[0][t]})[t]})}return n.apply(this,arguments),this},e.allJQueries.push(r)}t=r}})}async _triggerDOMContentLoaded(){this.domReadyFired=!0,await this._requestAnimFrame(),document.dispatchEvent(new Event("cwv-DOMContentLoaded")),await this._requestAnimFrame(),window.dispatchEvent(new Event("cwv-DOMContentLoaded")),await this._requestAnimFrame(),document.dispatchEvent(new Event("cwv-readystatechange")),await this._requestAnimFrame(),document.cwvonreadystatechange&&document.cwvonreadystatechange()}async _triggerWindowLoad(){await this._requestAnimFrame(),window.dispatchEvent(new Event("cwv-load")),await this._requestAnimFrame(),window.cwvonload&&window.cwvonload(),await this._requestAnimFrame(),this.allJQueries.forEach(e=>e(window).trigger("cwv-jquery-load")),window.dispatchEvent(new Event("cwv-pageshow")),await this._requestAnimFrame(),window.cwvonpageshow&&window.cwvonpageshow()}_handleDocumentWrite(){let e=new Map;document.write=document.writeln=function(t){let r=document.currentScript,n=document.createRange(),i=r.parentElement,s=e.get(r);void 0===s&&(s=r.nextSibling,e.set(r,s));let a=document.createDocumentFragment();n.setStart(a,0),a.appendChild(n.createContextualFragment(t)),i.insertBefore(a,s)}}async _requestAnimFrame(){return new Promise(e=>requestAnimationFrame(e))}loadAllCss(){for(var e=document.querySelectorAll("link[rel=cwvpsbdelayedstyle]"),t=0;t<=e.length;t++)if(e[t]){var r=document.createElement("link");r.href=this.removeVersionFromLink(e[t].href),r.rel="stylesheet",r.type="text/css",document.getElementsByTagName("head")[0].appendChild(r)}for(var e=document.querySelectorAll("style[type=cwvpsbdelayedstyle]"),t=0;t<=e.length;t++)if(e[t]){var r=document.createElement("style");r.type="text/css",r.textContent=e[t].textContent,document.getElementsByTagName("head")[0].appendChild(r)}}loadAllJs(){var e=document.querySelectorAll("script[type=cwvlazyloadscript]"),t=document.querySelector("script[id=jquery-core-js]"),r=document.querySelector("script[id=jquery-migrate-js]");if(t){var n=document.createElement("script");n.type="text/javascript",t.src&&(n.src=this.removeVersionFromLink(t.src),document.head.appendChild(n))}if(r){var n=document.createElement("script");n.type="text/javascript",r.src&&(n.src=this.removeVersionFromLink(r.src),document.head.appendChild(n))}for(var i=0;i<=e.length;i++)e[i]&&"jquery-core-js"!=e[i].id&&"jquery-migrate-js"!=e[i].id&&(e[i].type="text/javascript",e[i].src&&(e[i].src=this.removeVersionFromLink(e[i].src)))}removeVersionFromLink(e){if(!e)return"";let t=new URL(e);return t.searchParams.delete("ver"),t.searchParams.delete("time"),t.href}static run(){let e=new cwvLazyLoadScripts(["keydown","mouseover","mousemove","touchmove","touchstart","touchend","wheel","load"]);e._addUserInteractionListener(e)}}cwvLazyLoadScripts.run();