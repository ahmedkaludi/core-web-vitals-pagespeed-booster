function cwvpsbGetParamByName(e,t){t||(t=window.location.href);var s=RegExp("[?&]"+(e=e.replace(/[\[\]]/g,"\\$&"))+"(=([^&#]*)|&|#|$)").exec(t);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}function cwvpsbIsEmail(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}jQuery(document).ready(function(e){e(".child-opt-bulk").hide(),e(".image_optimization").change(function(){e(this).is(":checked")?e(".child-opt").show():(e(".child-opt").hide(),e(".child-opt-bulk").hide())}).change(),e("select.webp_support").change(function(){"manual"==e(this).children("option:selected").val()?(e(".child-opt-bulk").show(),e(".child-opt-bulk2").show()):(e(".child-opt-bulk").hide(),e(".child-opt-bulk2").hide())}),e(".js_optimization").change(function(){e(this).is(":checked")?e(".child-opt").show():e(".child-opt").hide()}).change(),e("#clear-css-cache").click(function(t){var s=e(this),a=s.attr("data-cleaningtype");if(!confirm('Are you sure to delete the "'+a+' cache"?'))return!1;s.parent("div").find(".clear-cache-msg").text(" Please wait...");var c=e(this).attr("data-security");e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{nonce:c,action:"cwvpsb_clear_cached_css",cleaning:a},success:function(e){200==e.status?s.parent("div").find(".clear-cache-msg").text(" Cache Cleared"):s.parent("div").find(".clear-cache-msg").text(e.msg)}})}),e(".cwvpsb-tabs a").click(function(t){var s=e(this).attr("href"),a=cwvpsbGetParamByName("tab",s);return a||(a="images"),e(this).siblings().removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),e(".form-wrap").find(".cwvpsb-"+a).siblings().hide(),e(".form-wrap .cwvpsb-"+a).show(),window.history.pushState("","",s),!1});var t={},s=0,a={action:"list_files_to_convert",nonce:e(this).attr("data-nonce")};e.ajax({url:ajaxurl,type:"post",dataType:"json",data:a,success:function(a){t=a.files,html='<button id="startListconversion" class="button button-primary" type="button">Bulk Convert to WebP</button><br/><br/>This tool will automatically convert your images in webp format and it will take some mintues please do not close this window or click the back button until all images converted<br/><br/><div class="log_convert_info"></div>',e(".bulkconverUpload").html(html),e("#startListconversion").on("click",function(){e(this).attr("disabled",!0),t.length,function a(c){var n=t[s],o={action:"webvital_webp_convert_file",nonce_verify:c,filename:n};void 0===n&&(n="All images are already WEBP"),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:o,success:function(o){if(200==o.status){e(".log_convert_info").html("Image '"+n+"' converted ( "+(s+1)+" out of total "+t.length+" files) <br/>"),(s+=1)<t.length?a(c):(e(".log_convert_info").append("-------------------------------- <br/>"),e(".log_convert_info").append("Conversion completed Total "+t.length+" files are converted <br/>"));var i=document.getElementsByClassName("bulkconverUpload")[0].parentNode;i.scrollTop=i.scrollHeight}else e(".log_convert_info").append("File: "+need_convertFile+" => Failed <br/>")}})}(e(".bulk_convert_webp").attr("data-nonce"))})}}),jQuery("#table_page_cc_style_all").DataTable({serverSide:!0,processing:!0,fixedColumns:!0,ajax:{type:"POST",url:ajaxurl,data:{action:"cwvpsb_showdetails_data",cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,cwvpsb_type:"all"}}}),jQuery("#table_page_cc_style_completed").DataTable({serverSide:!0,processing:!0,fixedColumns:!0,ajax:{type:"POST",url:ajaxurl,data:{action:"cwvpsb_showdetails_data",cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,cwvpsb_type:"cached"}}}),jQuery("#table_page_cc_style_failed").DataTable({serverSide:!0,processing:!0,fixedColumns:!0,ajax:{type:"POST",url:ajaxurl,data:{action:"cwvpsb_showdetails_data",cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,cwvpsb_type:"failed"}}}),jQuery("#table_page_cc_style_queue").DataTable({serverSide:!0,processing:!0,fixedColumns:!0,ajax:{type:"POST",url:ajaxurl,data:{action:"cwvpsb_showdetails_data",cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,cwvpsb_type:"queue"}}}),e(".cwvpb-global-container").hide(),e(".cwvpb-global-container:first").show(),e("#cwvpb-global-tabs a:first").addClass("cwvpb-global-selected"),e("#cwvpb-global-tabs a").click(function(){var t=e(this).attr("data-id");e(this).hasClass("cwvpb-global-selected")||(e("#cwvpb-global-tabs a").removeClass("cwvpb-global-selected"),e(this).addClass("cwvpb-global-selected"),e(".cwvpb-global-container").hide(),e("#"+t).show())}),e(".cwvpbs-resend-urls").on("click",function(t){t.preventDefault();var s=e(this);s.addClass("updating-message"),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,action:"cwvpsb_resend_urls_for_cache"},success:function(e){s.removeClass("updating-message"),e.status?location.reload(!0):alert("something went wrong")}})}),e(".cwvpbs-advance-toggle").on("click",function(t){t.preventDefault(),e(".cwvpbs-advance-btn-div").toggleClass("cwvpb-display-none")}),e(document).on("click",".cwvpb-resend-single-url",function(t){t.preventDefault();var s=e(this),a=e(this).attr("data-id"),c=e(this).attr("data-section");s.addClass("cwvpb-display-none"),s.after('<span class="spinner is-active"></span>'),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,action:"cwvpsb_resend_single_url_for_cache",url_id:a},success:function(t){s.removeClass("updating-message"),t.status?("all"==c&&(s.parent().parent().parent().find(".cwvpb-status-t").text("queue"),e(s).next("span").remove(),s.remove()),"failed"==c&&s.parent().parent().parent().remove()):(s.removeClass("cwvpb-display-none"),alert("something went wrong"))}})}),e(document).on("click",".cwb-copy-urls-error",function(t){t.preventDefault();var s=e(this).parent().find(".cwb-copy-urls-text"),a=e("<input>");e("body").append(a),a.val(e(s).val()).select(),document.execCommand("copy"),a.remove(),e("<div>Copied!</div>").insertBefore(e(this)).delay(3e3).fadeOut()}),e(".cwvpsb-recheck-url-cache").on("click",function(t){var s;if(t.preventDefault(),!confirm("It will check all cached urls. if any one has issue will optimize it again. Proceed?"))return!1;!function t(s,a){s.addClass("updating-message"),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,action:"cwvpsb_recheck_urls_cache",page:a},success:function(e){s.removeClass("updating-message"),e.status?e.count>0?t(s,a+=1):(alert("Recheck is done"),location.reload(!0)):alert("something went wrong")}})}(e(this),0)}),e(".cwvpsb-reset-url-cache").on("click",function(t){if(t.preventDefault(),!confirm("Are you sure? It will start optimize process from beginning again."))return!1;var s=e(this);s.addClass("updating-message"),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,action:"cwvpsb_reset_urls_cache"},success:function(e){s.removeClass("updating-message"),e.status?location.reload(!0):alert("something went wrong")}})}),e(".nav-tab").on("click",function(t){e(".cwvpsb-support").is(":visible")?e("#submit").hide():e("#submit").show()}),e(".cwvpsb-send-query").on("click",function(t){t.preventDefault(),e(".cwvpsb-query-error").hide(),e(".cwvpsb-query-success").hide();var s=e("#cwvpsb_query_message").val(),a=e("#cwvpsb_query_email").val();""!=e.trim(s)&&""!=e.trim(a)&&!0==cwvpsbIsEmail(a)?(e(".cwvpsb-send-query").text("Sending ..."),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"cwvpsb_send_query_message",message:s,email:a,cwvpsb_wpnonce:cwvpsb_script_vars.nonce},success:function(t){"t"==t.status?(e(".cwvpsb-query-success").show(),e(".cwvpsb-query-error").hide(),e("#cwvpsb_query_message").val(""),e("#cwvpsb_query_email").val(""),e(".cwvpsb-send-query").text("Send Support Request")):(e(".cwvpsb-query-success").hide(),e(".cwvpsb-query-error").show(),e(".cwvpsb-send-query").text("Send Support Request"))},error:function(e){console.log(e)}})):""==e.trim(s)&&""==e.trim(a)?alert("Please enter the message, email"):(""==e.trim(s)&&alert("Please enter the message"),""==e.trim(a)&&alert("Please enter the email"),!1==cwvpsbIsEmail(a)&&alert("Please enter a valid email"))})});var css_check_interval=setInterval(function(){jQuery.ajax({url:ajaxurl,type:"post",dataType:"json",data:{cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,action:"cwvpsb_update_critical_css_stat"},success:function(e){if("success"==e.status){if(e.percentage&&(jQuery(".cwvpsb_progress_bar_body").css("width",e.percentage+"%"),jQuery(".cwvpsb_progress_bar_body").text(e.percentage+"%")),e.total_count&&jQuery("#cwvpsb_css_total_count").text(e.total_count+" URLs"),e.queue_count){jQuery("#cwvpsb_css_queue_count").text(e.queue_count+" URLs");var t=null,s="NA";Math.floor(e.queue_count/300)>0&&(t=Math.floor(e.queue_count/300)+" Hours"),t?s=t+e.queue_count%60+" Min":e.queue_count%60>0&&(s=e.queue_count%60+" Min"),s&&jQuery("#cwvpsb_css_generate_time").text(s)}e.cached_count&&jQuery("#cwvpsb_css_cached_count").text(e.cached_count+" URLs"),jQuery("#cwvpsb_css_failed_count").length&&e.failed_count&&jQuery("#cwvpsb_css_failed_count").text(e.failed_count+" URLs"),e.total_count==Number(e.cached_count)+Number(e.failed_count)&&clearInterval(css_check_interval)}}})},1e4);jQuery(document).ready(function(e){if(cwvpsb_localize_data.do_tour){var t,s="<h3>Thanks For Core Web Vitals & PageSpeed Booster!</h3>";s+="<p>Do you want the latest updates before others on Core Web Vitals & PageSpeed Booster ? - Free just for users of Core Web Vitals & PageSpeed Booster!</p>",s+='<style type="text/css">',s+=".wp-pointer-buttons{ padding:0; overflow: hidden; }",s+=".wp-pointer-content .button-secondary{  left: -25px;background: transparent;top: 5px; border: 0;position: relative; padding: 0; box-shadow: none;margin: 0;color: #0085ba;} .wp-pointer-content .button-primary{ display:none}  #cwvpsb_mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }",s+="</style>",s+='<div id="cwvpsb_mc_embed_signup">',s+='<form method="POST" accept-charset="utf-8" id="cwvpsb-news-letter-form">',s+='<div id="cwvpsb_mc_embed_signup_scroll">',s+='<div class="cwvpsb-mc-field-group" style="    margin-left: 15px;    width: 195px;    float: left;">',s+='<input type="text" name="cwvpsb_subscriber_name" class="form-control" placeholder="Name" hidden value="'+cwvpsb_localize_data.current_user_name+'" style="display:none">',s+='<input type="text" value="'+cwvpsb_localize_data.current_user_email+'" name="cwvpsb_subscriber_email" class="form-control" placeholder="Email*"  style="      width: 180px;    padding: 6px 5px;">',s+='<input type="text" name="cwvpsb_subscriber_website" class="form-control" placeholder="Website" hidden style=" display:none; width: 168px; padding: 6px 5px;" value="'+cwvpsb_localize_data.get_home_url+'">',s+='<input type="hidden" name="ml-submit" value="1" />',s+="</div>",s+='<div id="mce-responses">',s+="</div>",s+='<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a631df13442f19caede5a5baf_c9a71edce6" tabindex="-1" value=""></div>',s+='<input type="submit" value="Subscribe" name="subscribe" id="pointer-close" class="button mc-newsletter-sent" style=" background: #0085ba; border-color: #006799; padding: 0px 16px; text-shadow: 0 -1px 1px #006799,1px 0 1px #006799,0 1px 1px #006799,-1px 0 1px #006799; height: 30px; margin-top: 1px; color: #fff; box-shadow: 0 1px 0 #006799;">',s+='<p id="cwvpsb-news-letter-status"></p>',s+="</div>",s+="</form>",s+="</div>",e(document).on("submit","#cwvpsb-news-letter-form",function(t){t.preventDefault();var s=e(this),a=s.find('input[name="cwvpsb_subscriber_name"]').val(),c=s.find('input[name="cwvpsb_subscriber_email"]').val();website=s.find('input[name="cwvpsb_subscriber_website"]').val(),e.post(cwvpsb_localize_data.ajax_url,{action:"cwvpsb_subscribe_to_news_letter",cwvpsb_security_nonce:cwvpsb_localize_data.cwvpsb_security_nonce,name:a,email:c,website:website},function(t){t?"Some fields are missing."==t?(e("#cwvpsb-news-letter-status").text(""),e("#cwvpsb-news-letter-status").css("color","red")):"Invalid email address."==t?(e("#cwvpsb-news-letter-status").text(""),e("#cwvpsb-news-letter-status").css("color","red")):"Invalid list ID."==t?(e("#cwvpsb-news-letter-status").text(""),e("#cwvpsb-news-letter-status").css("color","red")):"Already subscribed."==t?(e("#cwvpsb-news-letter-status").text(""),e("#cwvpsb-news-letter-status").css("color","red")):(e("#cwvpsb-news-letter-status").text("You're subscribed!"),e("#cwvpsb-news-letter-status").css("color","green")):alert("Sorry, unable to subscribe. Please try again later!")})});var a={content:s,position:{edge:"top",align:"left"}};a=e.extend(a,{buttons:function(e,t){return button=jQuery('<a id="pointer-close" class="button-secondary">'+cwvpsb_localize_data.button1+"</a>"),button_2=jQuery("#pointer-close.button"),button.bind("click.pointer",function(){t.element.pointer("close")}),button_2.on("click",function(){setTimeout(function(){t.element.pointer("close")},3e3)}),button},close:function(){e.post(cwvpsb_localize_data.ajax_url,{pointer:"cwvpsb_subscribe_pointer",action:"dismiss-wp-pointer"})},show:function(e,t){t.pointer.css({left:"170px",top:"160px"})}}),t=function(){e(cwvpsb_localize_data.displayID).pointer(a).pointer("open"),cwvpsb_localize_data.button2&&(jQuery("#pointer-close").after('<a id="pointer-primary" class="button-primary">'+cwvpsb_localize_data.button2+"</a>"),jQuery("#pointer-primary").click(function(){cwvpsb_localize_data.function_name}),jQuery("#pointer-close").click(function(){e.post(cwvpsb_localize_data.ajax_url,{pointer:"cwvpsb_subscribe_pointer",action:"dismiss-wp-pointer"})}))},a.position&&a.position.defer_loading?e(window).bind("load.wp-pointers",t):t()}});